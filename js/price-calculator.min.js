const _stairPricePerMp=10,_villasGenericPricePerMp=12,_villasMaintenancePricePerMp=8,_villasConstructorPricePerMp=14,_officeGenericPricePerMp=10,_officeMaintenancePricePerMp=5,_officeConstructorPricePerMp=12,_summaryLines=$("#summary-lines"),_totalPrice=$("#total-price"),_summaryListItem="<div class='summary-line'>  <span class='summary-line-title'>{{summaryLineTitle}}</span>  <span class='summary-line-price'>{{summaryLinePrice}}</span></div>",_summaryListItemWithIndent="<div class='summary-line indent'>  <span class='summary-line-title'>{{summaryLineTitle}}</span>  <span class='summary-line-price'>{{summaryLinePrice}}</span></div>";function activate_selected_children(e){children=$(e).find("input:checked"),children.each((function(){$(this).trigger("change");var e=$(this).attr("data-ref-id");void 0!==e&&activate_selected_children($("#"+e))}))}function Handle_radio(e){var t=parseInt($(e).closest(".price-calculator-section").attr("level"));$(".price-calculator-section.hideable").filter((function(){return parseInt($(this).attr("level"))>t})).hide(),$(e).attr("data-ref-id").split(";").forEach((function(t){show_progressive($("#"+t));var a=$(e).attr("data-key");void 0!==a&&$("#"+t).attr("data-key",a),activate_selected_children($("#"+t))})),calculate_total()}function show_progressive(e){$(e).css({opacity:"0",display:"inline-block"}).show().animate({opacity:1},1500)}function get_areas_price(){var e=0,t=$(".price-calculator-section.areas:visible")[0];return $(t).find(".areas-detail input[type=range]").each((function(){var a=$(this).val();$("#"+this.id+"-value").text(a);var r="#"+$(this).attr("data-ref-id");a>0&&$(r).is(":hidden")&&show_progressive($(r)),0==a&&$(r).is(":visible")&&$(r).hide();var i=$(t).attr("data-key"),n=a*$(this).attr("data-price-per-unit-"+i);n>0&&_summaryLines.append(_summaryListItem.replace("{{summaryLineTitle}}",$(this).attr("data-text-"+i)).replace("{{summaryLinePrice}}",n+" RON")),e+=n})),e}function get_extras_price(){var e=0;return $(".price-calculator-section.extras:visible").each((function(){var t=$(this).find("input[type=checkbox]");if(0!==t.length){var a=$(this).attr("data-text"),r=0,i="";t.each((function(){var e="#"+$(this).attr("data-ref-id"),t=$(this).is(":checked");if("#undefined"!==e){if(!t)return $(e).is(":visible")&&$(e).hide(),!0;$(e).is(":hidden")&&show_progressive($(e));var a=$(e).children("input")[0],n=parseInt(a.value);$("#"+a.id+"-value").val(n);var c,s=parseInt($(a).attr("data-price-per-unit-generic")),u="data-unit";if(1===n&&(u+="-1"),(c=n*s)>0){var l=$(a).attr("data-text")+" - "+n+" "+$(a).attr(u)+" * "+s+" RON";i+=_summaryListItemWithIndent.replace("{{summaryLineTitle}}",l).replace("{{summaryLinePrice}}",c+" RON"),r+=c}return!0}if(!t)return!0;(c=parseInt($(this).attr("data-price-per-unit")))>0&&(i+=_summaryListItemWithIndent.replace("{{summaryLineTitle}}",$(this).attr("data-text")).replace("{{summaryLinePrice}}",c+" RON"),r+=c)})),0!==r&&(e+=r,_summaryLines.append(_summaryListItem.replace("{{summaryLineTitle}}",a).replace("{{summaryLinePrice}}",r+" RON")),_summaryLines.append(i))}})),e}function calculate_house(){return get_areas_price()+get_extras_price()}function calculate_mp_based_area(e){var t=0;return $(".price-calculator-section."+e+":visible").each((function(){var e=$(this).find("span.unit-price")[0].innerHTML,a=$(this).find("input[type=range]")[0],r=parseInt(a.value);$("#"+a.id+"-value").val(r+" mp");var i=r*e;0!==i&&(t+=i,t+=get_extras_price(),_summaryLines.append(_summaryListItem.replace("{{summaryLineTitle}}",$(a).attr("data-text")+" "+r+" mp").replace("{{summaryLinePrice}}",i+" RON")))})),t}function calculate_stairs(){var e=$("#number-of-stairs").val();$("#number-of-stairs-value").val(e);var t=10*e+" RON";_summaryLines.empty(),_summaryLines.append(_summaryListItem.replace("{{summaryLineTitle}}","Scări de bloc").replace("{{summaryLinePrice}}",t)),_totalPrice.text(t)}function get_discount(e){var t=parseInt($("#discount-percent").attr("data-percent"))||0;if(0===t)return 0;var a=e*t/100;return _summaryLines.append(_summaryListItem.replace("{{summaryLineTitle}}","Discount "+$("#discount-percent").attr("data-code")+" - "+t+" %").replace("{{summaryLinePrice}}","- "+a+" RON")),a}function calculate_total(){_summaryLines.empty();var e=0,t=$('input[type=radio][name="construction_type"]:checked').val();"house"===t&&(e+=calculate_house()),"office"!==t&&"villas"!==t||(e+=calculate_mp_based_area(t)),e-=get_discount(e),_totalPrice.text(e+" RON")}function sendCalculation(){var e="Bună ziua,\n\nV-am fi foarte recunoscători dacă ați putea să ne furnizați mai multe detalii despre cotația următoarelor servicii\n\n";$("#summary-lines").children(".summary-line").each((function(){$(this).hasClass("indent")&&(e+="  ");var t=$(this).children(".summary-line-title")[0].innerHTML,a=$(this).children(".summary-line-price")[0].innerHTML;e+=t+" = "+a+"\n"}));var t=$("#summary-total").children(".summary-line-price")[0].innerHTML;e+="TOTAL - "+t,e+="\n\nAșteptăm cu nerăbdare un răspuns de la dvs. Mulţumim anticipat!",$("#message").text(e),$("#message").height($("#message").prop("scrollHeight")),$("html, body").animate({scrollTop:$("#contact-section").offset().top},1500)}function onlyLettersAndNumbers(e){return/^[A-Za-z0-9]*$/.test(e)}function applyVoucher(){var e=$("#voucher-code").val();e&&($("#voucher-error").hide(),$.ajax({type:"POST",dataType:"json",url:"discount.php",data:{discountCode:$("#voucher-code").val()},timeout:6e3,error:function(e,t){$("#voucher-error").text("Eroare!"),$("#voucher-error").fadeIn(1e3)},success:function(t){var a=t.status,r=t.message;!0===a?($("#discount-percent").attr("data-code",e),$("#discount-percent").attr("data-percent",r),$("#voucher-wrapper").hide(),calculate_total()):($("#voucher-error").text(r),$("#voucher-error").fadeIn(1e3))}}))}$(document).ready((function(){$("#villas-generic-price-per-mp").text(12),$("#villas-maintanence-price-per-mp").text(8),$("#villas-constructor-price-per-mp").text(14),$("#office-generic-price-per-mp").text(10),$("#office-maintanence-price-per-mp").text(5),$("#office-constructor-price-per-mp").text(12),$("input[type=radio]").change((function(){Handle_radio($(this))}))}));